<!DOCTYPE html>

<html lang="en-us">

<head>

  <meta charset="UTF-8">
  <title>Train Sched</title>

    <!-- reset.css -->
    <link rel="stylesheet" type="text/css" href="assets/css/reset.css">

    <!-- bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" crossorigin="anonymous">

    <!-- style.css -->
    <link rel="stylesheet" type="text/css" href="assets/css/style.css">
  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery.js"></script>

  <!-- Link to Moment.js should go here -->
  <script src="https://cdn.jsdelivr.net/momentjs/2.12.0/moment.min.js"></script>

  <!-- LINK TO FIREBASE GOES HERE -->
  <script src="https://www.gstatic.com/firebasejs/live/3.0/firebase.js"></script>

</head>

<body>

<!-- ====================================PAGE=======================================-->
<div class=container>
    <div class="jumbotron">
        <h1>Anytime is Train Time</h1>
        <p>Choo Choo. Chee Chee.</p>
    </div>

<!-- ======================= Current Train Schedule =================================-->
<div class="panel">
  <!-- Default panel contents -->
  <div class="panel-heading"><strong>Current Train Schedule</strong></div>
  <div class="panel-body" id=curTrainSchedTableHolder>

<div class="container-fluid bg-3 text-center">    
  <div class="row">
    <div class="col-sm-3" id=trainHdrBox>
    <p class="hdrRowP" id=trainHdr>Train</p>      
    </div>
    <div class="col-sm-3" id=destinationHdrBox>
    <p class="hdrRowP" id=destinationHdr>Destination</p>      
    </div>
    <div class="col-sm-2" id=frequencyHdrBox>
    <p class="hdrRowP" id=frequencyHdr>Frequency</p>      
    </div>
    <div class="col-sm-2" id=nextArrivalHdrBox>
    <p class="hdrRowP" id=nextArrivalHdr>Next Arrival</p>      
    </div>
    <div class="col-sm-2" id=minsAwayHdrBox>
    <p class="hdrRowP" id=minsAwayHdr>Minutes Away</p>      
    </div>
  </div> <!-- end row -->
</div> <!-- end container-fluid class -->
</div> <!-- end curTrainSchedTableHolder -->
</div> <!-- end panel -->

<!-- ======================= Add Train Form =================================-->
<div class="panel">
  <!-- Default panel contents -->
  <div class="panel-heading"><strong>Add Train</strong></div>
  <div class="panel-body" id=addTrainTextboxHolder>

<!-- changes begin -->

<div class="container-fluid bg-3 text-center">    
  <div class="row">

    <div class="col-sm-12" id=trainTxtBoxHdr>
    <p class="detailRowP" id=trainTxtHdr>Train Name</p>      
    </div>
    <div class="col-sm-12" id=trainTxtBox>
    <input class="inputTextBox" type="text" id="inputTrainName">   
    </div>

    <div class="col-sm-12" id=destinationTxtBoxHdr>
    <p class="detailRowP" id=destinationTxtHdr>Destination</p>      
    </div>
    <div class="col-sm-12" id=destinationTxtBox>
    <input class="inputTextBox" type="text" id="inputDestination">   
    </div>

    <div class="col-sm-12" id=timeTxtBoxHdr>
    <p class="detailRowP" id=timeTxtHdr>First Train Time (military time)</p>      
    </div>
    <div class="col-sm-12" id=timeTxtBox>
    <input class="inputTextBox" type="text" id="inputTime">   
    </div>

    <div class="col-sm-12" id=freqTxtBoxHdr>
    <p class="detailRowP" id=freqTxtHdr>Frequency (mins)</p>      
    </div>
    <div class="col-sm-12" id=freqTxtBox>
    <input class="inputTextBox" type="text" id="freqTrainName">   
    </div>
 
  </div> <!-- end row -->
</div> <!-- end container-fluid class -->
</div> <!-- end addTrainTextboxHolder -->
</div> <!-- end panel -->

<!-- changes end -->





<!--table id=inputTableTextboxes>
  <tr>
    <p>Train Name</p>
  </tr>
  <tr>
    <td><input type="text" id="inputTrainName"></td>
  </tr>
  <tr>
    <p>Destination</p>
  </tr>
  <tr>
    <td><input type="text" id="inputDestination"></td>
  </tr>
  <tr>
    <p>First Train Time (HH:mm military time)</p>
  </tr>
  <tr>
    <td><input type="text" id="inputTime"></td>
  </tr>
  <tr>
    <p>Frequency (min)</p>
  </tr>
  <tr>
    <td><input type="text" id="inputFreq"></td>
  </tr>
</table-->

  <button class="submitButton">Submit</button>
</div>

</div> <!-- end page container -->
<!-- ====================================END PAGE=======================================-->

<!-- WORKING HERE END -->

  <script>
    //var randomDate = "02/23/1999";

    //TEXTBOX INPUT
    //var inputTime = "1932";
    var inputName = "Springview Special";
    var inputDestination = "Winter Park";
    var inputFreq = "30";
    var inputTime = "0932";

    //Calculated elements
    var nextArrivalTime;
    var minutesAway;

    //Firebase DB initialization

    //Accept input from textboxes
      //Get train input from textboxes

    //Convert inputTime from military time to EST
    var inputEST = convertToEST(inputTime);
        console.log("inputEST: " + inputEST);
    
    //On button click
    // WORKING HERE ===========
    $("#submitButton").on("click", function() {

        //Calculate nextArrivalTime
        nextArrivalTime = moment(inputEST).add(inputFreq, 'm');
            console.log("nextArrivalTime: " + moment(nextArrivalTime).format("hh:mm A"));

        //Calculate minutesAway
        var valueOfMoment =  moment().format('MM DD YYYY hh:mm A');
            console.log("moment(): " + valueOfMoment);

        minutesAway = moment(nextArrivalTime).diff(valueOfMoment, 'm');
            console.log("minutesAway: " + minutesAway);
    
        //Write train info into Fireebase DB?
        //Dynamically attach train data for display
        $("#trainName").text(inputName);
        $("#destination").text(inputDestination);
        $("#frequency").text(inputFreq);
        $("#nextArrival").text(nextArrivalTime);
        $("#minutesAway").text(minutesAway);

    }); //end button click

    //WORKING HERE END=============
 
    function convertToEST(inputString) {

      return moment(inputString, 'HH:mm').format('MM DD YYYY hh:mm A');

    }
  
  </script>

</body>

</html>